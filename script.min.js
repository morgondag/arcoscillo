function init(){setCanvas(),createOscillator(),getUserMedia()}function setCanvas(){var a=document.getElementById("canvas");a.height=height,a.width=width,canvasContext=a.getContext("2d")}function createOscillator(){oscillatorContext=new webkitAudioContext,oscillator=oscillatorContext.createOscillator(),oscillator.connect(oscillatorContext.destination),oscillator.frequency.value=0,oscillator.start(0)}function getUserMedia(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({audio:!0},createMediaStreamSource)}function createMediaStreamSource(a){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,audioContext=new AudioContext;var b=audioContext.createMediaStreamSource(a);meter=createAudioMeter(audioContext),b.connect(meter),animate()}function animate(){requestAnimFrame(animate),volume=Math.floor(1e3*meter.volume);var a=getColor();canvasContext.clearRect(0,0,width,height),canvasContext.beginPath(),canvasContext.arc(width/2,height/2,volume,0,2*Math.PI,!0),canvasContext.closePath(),canvasContext.fillStyle=a,canvasContext.fill(),updateOscillatorFreq()}function updateOscillatorFreq(){oscillator.frequency.value=volume>=100?2*volume:100}function getColor(){return volume>50&&100>=volume?"#0F9D58":volume>100&&150>=volume?"#F4B400":volume>150?"#DB4437":"#4285F8"}function changeWaveType(a){oscillator.type=JSON.parse(a.target.value)}var audioContext,canvasContext,meter,oscillator,oscillatorContext,volume,body=document.body,html=document.documentElement,height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),width=Math.max(body.scrollWidth,body.offsetWidth,html.clientWidth,html.scrollWidth,html.offsetWidth);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),init();